# SoulByte - å¾®ä¿¡èŠå¤©æ•°æ®å¤„ç†å·¥å…· v2.0

[![Python Version](https://img.shields.io/badge/python-3.8%2B-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)
[![Version](https://img.shields.io/badge/version-2.0-brightgreen.svg)](CHANGELOG.md)
[![Series](https://img.shields.io/badge/series-æ•°å­—äººç”Ÿæˆ-purple.svg)](ROADMAP.md)

SoulByte æ˜¯**æ•°å­—äººç”Ÿæˆç³»åˆ—é¡¹ç›®**çš„æ ¸å¿ƒæ•°æ®å¤„ç†ç»„ä»¶ï¼Œä¸“æ³¨äºå°†å¾®ä¿¡èŠå¤©è®°å½•è½¬æ¢ä¸ºé«˜è´¨é‡çš„AIè®­ç»ƒæ•°æ®é›†å’Œä¸ªäººçŸ¥è¯†åº“ã€‚è¯¥å·¥å…·é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒæ™ºèƒ½å†å²è®°å½•æ„å»ºã€è”ç³»äººå…³ç³»ç®¡ç†å’Œå¤§æ¨¡å‹è´¨é‡è¯„ä¼°ï¼Œä¸ºæ•°å­—äººçš„ä¸ªæ€§åŒ–è®­ç»ƒå’ŒçŸ¥è¯†åº“æ„å»ºå¥ å®šåŸºç¡€ã€‚

ç³»åˆ—é¡¹ç›®ï¼Œè¶…çº§æƒ³è¦starï¼Œéº»çƒ¦ç‚¹ä¸ªstarå†èµ°å‘—~~~
[![Star](https://img.shields.io/github/stars/kuangren777/SoulByte.svg?style=social&label=Star)](https://github.com/kuangren777/SoulByte/)

## ğŸ¯ é¡¹ç›®å®šä½

### ğŸ“ ç³»åˆ—é¡¹ç›®æ¦‚è§ˆ
- **å½“å‰é˜¶æ®µ**: æ•°æ®é¢„å¤„ç†å’Œè®­ç»ƒæ•°æ®ç”Ÿæˆ
- **é¡¹ç›®æ„¿æ™¯**: æ„å»ºå®Œæ•´çš„æ•°å­—äººç”Ÿæˆç”Ÿæ€ç³»ç»Ÿ
- **æ ¸å¿ƒç›®æ ‡**: ä»ä¸ªäººèŠå¤©æ•°æ®ä¸­æå–"æ•°å­—çµé­‚"ï¼Œç”Ÿæˆä¸ªæ€§åŒ–æ•°å­—äºº

### ğŸš€ SoulByte åœ¨ç³»åˆ—ä¸­çš„è§’è‰²
- **æ•°æ®åŸºçŸ³**: ä¸ºæ•°å­—äººæä¾›é«˜è´¨é‡çš„è®­ç»ƒæ•°æ®
- **çŸ¥è¯†èƒå–**: ä»èŠå¤©è®°å½•ä¸­æå–ä¸ªäººçŸ¥è¯†å’Œè¯­è¨€æ¨¡å¼
- **ä¸ªæ€§åŒ–**: ä¿æŒä¸ªäººç‹¬ç‰¹çš„è¡¨è¾¾é£æ ¼å’Œæ€ç»´ä¹ æƒ¯

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### ğŸ”§ å½“å‰åŠŸèƒ½ï¼ˆv2.0ï¼‰
- **æ™ºèƒ½æ•°æ®å¤„ç†**: 72å°æ—¶æ—¶é—´çª—å£çš„å†å²è®°å½•æ„å»º
- **è”ç³»äººå…³ç³»ç®¡ç†**: æ™ºèƒ½è¯†åˆ«å’Œç®¡ç†äººé™…å…³ç³»ç½‘ç»œ
- **è´¨é‡è¯„ä¼°**: å¤§æ¨¡å‹é©±åŠ¨çš„è®­ç»ƒæ•°æ®è´¨é‡è¯„ä¼°
- **æ¨¡å—åŒ–æ¶æ„**: æ˜“äºæ‰©å±•å’Œé›†æˆçš„ç»„ä»¶åŒ–è®¾è®¡

### ğŸš€ æ™ºèƒ½å†å²è®°å½•æ„å»º
- **72å°æ—¶æ—¶é—´çª—å£**ï¼šæ‰©å±•å†å²è®°å½•èŒƒå›´ï¼Œæä¾›æ›´ä¸°å¯Œçš„å¯¹è¯ä¸Šä¸‹æ–‡
- **æ™ºèƒ½è”ç³»äººè¿‡æ»¤**ï¼šåªæ˜¾ç¤ºä¸å½“å‰å¯¹è¯è€…ç›¸å…³çš„å†å²æ¶ˆæ¯
- **æ—¥æœŸæ—¶é—´ä¼˜åŒ–**ï¼šå®Œæ•´çš„æ—¥æœŸæ˜¾ç¤ºå’Œæ™ºèƒ½æ—¥æœŸåˆ†éš”çº¿
- **ä¸Šä¸‹æ–‡è¿è´¯æ€§**ï¼šä¿æŒå¯¹è¯é€»è¾‘æ€§å’Œæ—¶é—´è¿ç»­æ€§

### ğŸ‘¥ è”ç³»äººå…³ç³»ç®¡ç†  
- **è‡ªåŠ¨ä¿¡æ¯æå–**ï¼šä»users.jsonè‡ªåŠ¨åŠ è½½è”ç³»äººåŸºæœ¬ä¿¡æ¯
- **å…³ç³»åˆ†ç±»ç®¡ç†**ï¼šæ”¯æŒæœ‹å‹ã€åŒäº‹ã€å®¶äººç­‰å¤šç§å…³ç³»ç±»å‹
- **äº¤äº’å¼ç¼–è¾‘**ï¼šå‹å¥½çš„å‘½ä»¤è¡Œç•Œé¢ç®¡ç†è”ç³»äººå…³ç³»
- **ç»Ÿè®¡åˆ†æ**ï¼šæä¾›è¯¦ç»†çš„è”ç³»äººæ´»è·ƒåº¦ç»Ÿè®¡

### ğŸ¤– å¤§æ¨¡å‹è´¨é‡è¯„ä¼°
- **æ™ºèƒ½è¯„åˆ†**ï¼šä½¿ç”¨å¤§æ¨¡å‹å¯¹è®­ç»ƒæ ·æœ¬è¿›è¡Œè´¨é‡è¯„ä¼°
- **ç¼“å­˜æœºåˆ¶**ï¼šé¿å…é‡å¤è¯„ä¼°ï¼Œæé«˜å¤„ç†æ•ˆç‡
- **çµæ´»ç­›é€‰**ï¼šæ”¯æŒå¤šç§åˆ†æ•°é˜ˆå€¼çš„æ•°æ®ç­›é€‰
- **è¯„ä¼°æŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„è´¨é‡è¯„ä¼°æŠ¥å‘Š




## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. **Pythonç¯å¢ƒè¦æ±‚**
   ```bash
   # Python 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
   python --version
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

3. **æ•°æ®å‡†å¤‡**
   
   > æ„Ÿè°¢[PyWxDump](https://github.com/xaoyaoo/PyWxDump)å¼€æºå¾®ä¿¡èŠå¤©è®°å½•ä¸‹è½½ã€‚æœ¬é¡¹ç›®ä¾èµ–äº[PyWxDump](https://github.com/xaoyaoo/PyWxDump)ã€‚

   3.1 é¦–å…ˆï¼Œä»[è¿™é‡Œ](https://github.com/xaoyaoo/PyWxDump/releases)è·å–[PyWxDump](https://github.com/xaoyaoo/PyWxDump)æœ€æ–°releaseç‰ˆæœ¬ã€‚(å»ºè®®ä½¿ç”¨Windowsï¼Œå¾®ä¿¡ç‰ˆæœ¬<=3.9)

   3.2 ä½¿ç”¨
   > 1.æ‰“å¼€å¾®ä¿¡ç”µè„‘ç‰ˆï¼Œç™»å½•å¾®ä¿¡
   >
   > 2.è¿›å…¥ä¸‹è½½çš„exeæ–‡ä»¶æ‰€åœ¨ç›®å½•
   >
   > 3.åŒå‡»wx_dump.exeè¿è¡Œ
   >
   > 4.æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://127.0.0.1:5000/ ä½¿ç”¨å›¾å½¢ç•Œé¢
   >
   > 5.æ ¹æ®æç¤ºæ“ä½œ
   >
   > ã€æ³¨ã€‘æ›´å¤šè¯¦ç»†ä½¿ç”¨æ–¹æ³•å…³æ³¨å…¬ä¼—å·ï¼šé€é¥ä¹‹èŠ¯ï¼Œå›å¤ï¼šPyWxDump è·å–å›¾æ–‡æ•™ç¨‹ã€‚

   è¿›å…¥èŠå¤©ç•Œé¢ï¼Œå°†å¾®ä¿¡èŠå¤©è®°å½•ä½¿ç”¨CSVæ–‡ä»¶å¯¼å‡ºï¼ˆå»ºè®®ä½¿ç”¨ç§èŠçš„æ•°æ®ï¼Œä¸è¦ä½¿ç”¨ç¾¤èŠçš„æ•°æ®è¿›è¡Œè®­ç»ƒï¼‰ï¼Œå¹¶æ”¾ç½®åœ¨ä»¥ä¸‹ç»“æ„ä¸­ï¼š
   ```
   data/
   â”œâ”€â”€ å¾®ä¿¡å·xxxx/
   â”‚   â”œâ”€â”€ messages.csv    # èŠå¤©è®°å½•
   â”‚   â””â”€â”€ users.json      # è”ç³»äººä¿¡æ¯
   â”œâ”€â”€ å¾®ä¿¡å·xxxx/
   â”‚   â”œâ”€â”€ messages.csv
   â”‚   â””â”€â”€ users.json
   â””â”€â”€ ...
   ```

4. **é…ç½®æ–‡ä»¶**
   
   å¤åˆ¶å¹¶ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
   ```bash
   cp config.example.json config.json
   # ç¼–è¾‘ config.jsonï¼Œè®¾ç½®ä½ çš„å‚æ•°
   ```

### åŸºæœ¬ä½¿ç”¨

#### ğŸ¯ æ¨èå·¥ä½œæµï¼ˆåˆ†é˜¶æ®µå¤„ç†ï¼‰

```bash
# 1. é˜¶æ®µ1: æ•°æ®æå–å’Œè”ç³»äººä¿¡æ¯å»ºç«‹
python main.py stage1

# 2. ç®¡ç†è”ç³»äººå…³ç³»ï¼ˆå¯é€‰ï¼‰
python main.py contacts

# 3. é˜¶æ®µ2: å¤§æ¨¡å‹è¯„ä¼°å’Œæœ€ç»ˆæ•°æ®é›†ç”Ÿæˆ
python main.py stage2

# 4. ä»ç¼“å­˜ç­›é€‰ä¸åŒåˆ†æ•°çš„æ•°æ®ï¼ˆå¯é€‰ï¼‰
python main.py filter
```

#### ğŸ”„ å®Œæ•´å¤„ç†æµç¨‹ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰

```bash
# ä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰å¤„ç†æ­¥éª¤
python main.py
```

#### ğŸ“‹ æŸ¥çœ‹å¸®åŠ©

```bash
python main.py help
```

## âš™ï¸ é…ç½®è¯´æ˜

### åŸºæœ¬é…ç½® (config.json)

```json
{
  "data_processing": {
    "data_dir": "data",                    // æ•°æ®ç›®å½•è·¯å¾„
    "output_file": "training_data.json",   // è¾“å‡ºæ–‡ä»¶å
    "my_wxid": "your_wechat_id",          // ä½ çš„å¾®ä¿¡ID
    "max_inter_message_gap": 90,          // æ¶ˆæ¯å—å†…æœ€å¤§é—´éš”ï¼ˆç§’ï¼‰
    "max_reply_delay": 300,               // æœ€å¤§å›å¤å»¶è¿Ÿï¼ˆç§’ï¼‰
    "use_multiprocessing": true,          // æ˜¯å¦ä½¿ç”¨å¤šè¿›ç¨‹
    "max_workers": 4                      // æœ€å¤§è¿›ç¨‹æ•°
  },
  "llm_evaluation": {
    "enabled": true,                      // æ˜¯å¦å¯ç”¨å¤§æ¨¡å‹è¯„ä¼°
    "api_url": "https://api.example.com/v1/chat/completions",
    "api_key": "your_api_key",
    "model": "your_model_name",
    "max_workers": 3,                     // è¯„ä¼°å¹¶å‘æ•°
    "min_score": 5.0,                     // æœ€ä½é€šè¿‡åˆ†æ•°
    "timeout": 30,                        // è¯·æ±‚è¶…æ—¶æ—¶é—´
    "retry_attempts": 3,                  // é‡è¯•æ¬¡æ•°
    "evaluation_prompt": "è¯·è¯„ä¼°è¿™ä¸ªè®­ç»ƒæ ·æœ¬çš„è´¨é‡..."
  }
}
```

### é«˜çº§é…ç½®é€‰é¡¹

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `max_inter_message_gap` | 90 | åŒä¸€æ¶ˆæ¯å—å†…æ¶ˆæ¯é—´æœ€å¤§æ—¶é—´é—´éš”ï¼ˆç§’ï¼‰ |
| `max_reply_delay` | 300 | è®¤å®šä¸ºæœ‰æ•ˆå›å¤çš„æœ€å¤§å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰ |
| `use_multiprocessing` | true | å¤§æ•°æ®é›†æ—¶æ˜¯å¦å¯ç”¨å¤šè¿›ç¨‹åŠ é€Ÿ |
| `max_workers` | 4 | å¤šè¿›ç¨‹å¤„ç†æ—¶çš„æœ€å¤§è¿›ç¨‹æ•° |
| `min_score` | 5.0 | å¤§æ¨¡å‹è¯„ä¼°çš„æœ€ä½é€šè¿‡åˆ†æ•°ï¼ˆ1-10åˆ†ï¼‰ |

## ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### ğŸ”„ å†å²è®°å½•æ„å»º

#### ä¼ ç»Ÿæ–¹æ¡ˆ vs æ–°æ–¹æ¡ˆå¯¹æ¯”

**ä¼ ç»Ÿæ–¹æ¡ˆé—®é¢˜ï¼š**
```python
# æ—§ç‰ˆæœ¬åªè·å–å½“æ—¥æ¶ˆæ¯ï¼Œä¸”æ··åˆæ‰€æœ‰è”ç³»äºº
def build_context_old(messages, reply_time):
    reply_date = reply_time.date()
    context_messages = []
    for msg in messages:
        if msg['create_time'].date() == reply_date:
            context_messages.append(msg)  # åŒ…å«æ‰€æœ‰äººçš„æ¶ˆæ¯
    return context_messages
```

**æ–°æ–¹æ¡ˆæ”¹è¿›ï¼š**
```python
# æ–°ç‰ˆæœ¬ï¼š72å°æ—¶çª—å£ + æ™ºèƒ½è”ç³»äººè¿‡æ»¤
def build_context_new(messages, reply_time, current_talker_id):
    time_72h_ago = reply_time - timedelta(hours=72)
    context_messages = []
    for msg in messages:
        if time_72h_ago <= msg['create_time'] < reply_time:
            # åªåŒ…å«ç›¸å…³å¯¹è¯ï¼šå¯¹æ–¹å‘çš„æ¶ˆæ¯ + æˆ‘çš„æ‰€æœ‰æ¶ˆæ¯
            if (msg['is_sender'] == 0 and msg['talker'] == current_talker_id) or \
               (msg['is_sender'] == 1):
                context_messages.append(msg)
    return context_messages
```

#### å†å²è®°å½•å±•ç¤ºæ•ˆæœ

**æ–°ç‰ˆæœ¬æ˜¾ç¤ºæ•ˆæœï¼š**
```
â€”â€”â€”â€”â€” 2024å¹´03æœˆ15æ—¥ â€”â€”â€”â€”â€”
[14:32:15] å°æ˜: ä»Šå¤©çš„ä¼šè®®å‡†å¤‡å¾—æ€ä¹ˆæ ·ï¼Ÿ
[14:35:22] æˆ‘: å·®ä¸å¤šäº†ï¼ŒPPTå·²ç»åšå®Œäº†
[16:20:45] å°æ˜: é‚£å°±å¥½ï¼Œæ˜å¤©è§

â€”â€”â€”â€”â€” 2024å¹´03æœˆ16æ—¥ â€”â€”â€”â€”â€”
[09:15:30] å°æ˜: æ—©ä¸Šå¥½ï¼
[09:16:12] æˆ‘: æ—©ä¸Šå¥½ï¼Œå‡†å¤‡å‡ºå‘äº†å—ï¼Ÿ
[18:45:23] å°æ˜: ä»Šå¤©å¼€ä¼šçš„äº‹æƒ…æˆ‘æƒ³å†è®¨è®ºä¸€ä¸‹
```

### ğŸ‘¥ è”ç³»äººå…³ç³»ç®¡ç†

#### æ”¯æŒçš„å…³ç³»ç±»å‹
- ğŸ‘« **æœ‹å‹** - ä¸€èˆ¬æœ‹å‹å…³ç³»
- ğŸ’¼ **åŒäº‹** - å·¥ä½œç›¸å…³è”ç³»äºº  
- ğŸ“ **åŒå­¦** - å­¦æ ¡å…³ç³»
- ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **å®¶äºº** - å®¶åº­æˆå‘˜
- ğŸ’• **æ‹äºº** - æ‹çˆ±å…³ç³»
- ğŸ‘¨â€ğŸ« **å¸ˆé•¿** - è€å¸ˆã€å¯¼å¸ˆç­‰
- ğŸ‘¨â€ğŸ“ **å­¦ç”Ÿ** - å­¦ç”Ÿå…³ç³»
- ğŸ¤ **å®¢æˆ·** - å•†åŠ¡å…³ç³»
- â“ **é™Œç”Ÿäºº** - ä¸ç†Ÿæ‚‰çš„äºº
- ğŸ“‹ **å…¶ä»–** - è‡ªå®šä¹‰å…³ç³»

#### è”ç³»äººç®¡ç†æ“ä½œ

```bash
# è¿›å…¥è”ç³»äººç®¡ç†ç•Œé¢
python main.py contacts

# æ”¯æŒçš„æ“ä½œï¼š
# 1. æŸ¥çœ‹æ‰€æœ‰è”ç³»äºº - æ˜¾ç¤ºè”ç³»äººåˆ—è¡¨å’Œç»Ÿè®¡ä¿¡æ¯
# 2. æœç´¢è”ç³»äºº - é€šè¿‡æ˜µç§°/å¤‡æ³¨/IDæœç´¢
# 3. æ›´æ–°è”ç³»äººå…³ç³» - ä¿®æ”¹å…³ç³»ç±»å‹å’Œè¯¦ç»†å¤‡æ³¨
# 4. å¯¼å‡ºè”ç³»äººåˆ—è¡¨ - ç”Ÿæˆå®Œæ•´çš„è”ç³»äººæŠ¥å‘Š
```

### ğŸ¤– å¤§æ¨¡å‹è´¨é‡è¯„ä¼°

#### è¯„ä¼°æ ‡å‡†
- **å¯¹è¯è‡ªç„¶æ€§** (25%) - å›å¤æ˜¯å¦è‡ªç„¶æµç•…
- **å†…å®¹ç›¸å…³æ€§** (25%) - å›å¤æ˜¯å¦ä¸ä¸Šä¸‹æ–‡ç›¸å…³
- **è¯­è¨€é£æ ¼** (25%) - æ˜¯å¦ä¿æŒä¸€è‡´çš„è¯­è¨€é£æ ¼
- **ä¿¡æ¯å®Œæ•´æ€§** (25%) - æ˜¯å¦åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯

#### è¯„ä¼°æµç¨‹
1. **æ™ºèƒ½ç¼“å­˜** - é¿å…é‡å¤è¯„ä¼°ç›¸åŒæ ·æœ¬
2. **å¹¶å‘å¤„ç†** - æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘è¯„ä¼°
3. **é”™è¯¯é‡è¯•** - ç½‘ç»œé”™è¯¯æ—¶è‡ªåŠ¨é‡è¯•
4. **åˆ†æ•°è§£æ** - æ™ºèƒ½æå–è¯„åˆ†ç»“æœ
5. **ç»“æœç­›é€‰** - æ ¹æ®åˆ†æ•°é˜ˆå€¼ç­›é€‰é«˜è´¨é‡æ•°æ®

#### è¯„ä¼°ç»“æœåˆ†æ
```json
{
  "total_samples": 1000,
  "evaluated_samples": 1000,
  "passed_samples": 750,
  "average_score": 6.8,
  "score_distribution": {
    "0-2": 50,
    "2-4": 100,
    "4-6": 100,
    "6-8": 500,
    "8-10": 250
  }
}
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯´æ˜

### é˜¶æ®µ1è¾“å‡ºæ–‡ä»¶

| æ–‡ä»¶å | æè¿° | å†…å®¹ |
|--------|------|------|
| `stage1_results.json` | å®Œæ•´çš„é˜¶æ®µ1ç»“æœ | è®­ç»ƒæ•°æ®ã€è¯­è¨€æ¨¡å¼ã€åŸå§‹æ¶ˆæ¯ã€å¯¹è¯å›åˆ |
| `stage1_training_data.json` | çº¯è®­ç»ƒæ•°æ® | ä»…åŒ…å«instructionã€inputã€outputæ ¼å¼çš„è®­ç»ƒæ ·æœ¬ |
| `contacts.json` | è”ç³»äººæ•°æ®åº“ | æ‰€æœ‰è”ç³»äººçš„è¯¦ç»†ä¿¡æ¯å’Œå…³ç³»æ•°æ® |

### é˜¶æ®µ2è¾“å‡ºæ–‡ä»¶

| æ–‡ä»¶å | æè¿° | å†…å®¹ |
|--------|------|------|
| `training_data.json` | æœ€ç»ˆå®Œæ•´ç»“æœ | ç»è¿‡è¯„ä¼°çš„å®Œæ•´è®­ç»ƒæ•°æ®å’Œåˆ†ææŠ¥å‘Š |
| `training_data_training_only.json` | æœ€ç»ˆçº¯è®­ç»ƒæ•°æ® | ä»…åŒ…å«é«˜è´¨é‡çš„è®­ç»ƒæ ·æœ¬ |
| `evaluation_cache.json` | è¯„ä¼°ç¼“å­˜ | æ‰€æœ‰æ ·æœ¬çš„è¯„ä¼°ç»“æœç¼“å­˜ |
| `evaluation_report.json` | è¯„ä¼°æŠ¥å‘Š | è¯¦ç»†çš„è´¨é‡è¯„ä¼°ç»Ÿè®¡å’Œåˆ†æ |

### ç¼“å­˜ç­›é€‰è¾“å‡º

| æ–‡ä»¶å | æè¿° |
|--------|------|
| `training_data_filtered_{score}.json` | æŒ‰åˆ†æ•°ç­›é€‰çš„å®Œæ•´ç»“æœ |
| `training_only_filtered_{score}.json` | æŒ‰åˆ†æ•°ç­›é€‰çš„çº¯è®­ç»ƒæ•°æ® |

## ğŸ”§ é«˜çº§ç”¨æ³•

### æ‰¹é‡å¤„ç†å¤šä¸ªæ•°æ®é›†

```bash
# å¤„ç†ä¸åŒæ•°æ®é›†
python main.py stage1 --data-dir dataset1
python main.py stage1 --data-dir dataset2

# åˆå¹¶ç»“æœ
python tools/merge_datasets.py dataset1/output dataset2/output
```

### è‡ªå®šä¹‰è¯„ä¼°æ ‡å‡†

```python
# åœ¨ evaluators/llm_evaluator.py ä¸­ä¿®æ”¹è¯„ä¼°æç¤º
evaluation_prompt = """
è‡ªå®šä¹‰è¯„ä¼°æ ‡å‡†ï¼š
1. ä¸“ä¸šæœ¯è¯­ä½¿ç”¨å‡†ç¡®æ€§ (30%)
2. æƒ…æ„Ÿè¡¨è¾¾æ°å½“æ€§ (30%)  
3. å¯¹è¯é€»è¾‘è¿è´¯æ€§ (25%)
4. æ–‡åŒ–èƒŒæ™¯é€‚åº”æ€§ (15%)

è¯·å¯¹ä»¥ä¸‹æ ·æœ¬è¯„åˆ†(1-10åˆ†)ï¼š
æŒ‡ä»¤: {instruction}
è¾“å…¥: {input}
è¾“å‡º: {output}
"""
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

#### å¤§æ•°æ®é›†å¤„ç†ä¼˜åŒ–

```json
{
  "data_processing": {
    "use_multiprocessing": true,
    "max_workers": 8,              // æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´
    "chunk_size": 5000             // å¢å¤§å—å¤§å°
  },
  "llm_evaluation": {
    "max_workers": 5,              // æ ¹æ®APIé™åˆ¶è°ƒæ•´
    "batch_size": 20,              // æ‰¹é‡è¯„ä¼°
    "timeout": 60                  // å¢åŠ è¶…æ—¶æ—¶é—´
  }
}
```

#### å†…å­˜ä½¿ç”¨ä¼˜åŒ–

```python
# å¯¹äºè¶…å¤§æ•°æ®é›†ï¼Œå¯ç”¨æµå¼å¤„ç†
ENABLE_STREAMING = True
STREAM_CHUNK_SIZE = 1000

# å®šæœŸæ¸…ç†å†…å­˜
import gc
gc.collect()
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜è§£å†³

#### 1. å¯¼å…¥é”™è¯¯
```bash
# é”™è¯¯: ModuleNotFoundError: No module named 'core'
# è§£å†³: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
cd /path/to/soulbyte
python main.py
```

#### 2. æ•°æ®æ ¼å¼é”™è¯¯  
```bash
# é”™è¯¯: CSVæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®
# è§£å†³: æ£€æŸ¥CSVæ–‡ä»¶æ˜¯å¦åŒ…å«å¿…è¦å­—æ®µ
required_columns = ['id', 'CreateTime', 'is_sender', 'talker', 'msg', 'type_name']
```

#### 3. å¤§æ¨¡å‹APIé”™è¯¯
```bash
# é”™è¯¯: APIè°ƒç”¨å¤±è´¥
# è§£å†³: æ£€æŸ¥APIé…ç½®å’Œç½‘ç»œè¿æ¥
# 1. éªŒè¯APIå¯†é’¥æ˜¯å¦æ­£ç¡®
# 2. æ£€æŸ¥API URLæ˜¯å¦å¯è®¿é—®
# 3. ç¡®è®¤APIè¯·æ±‚æ ¼å¼æ˜¯å¦ç¬¦åˆè¦æ±‚
```

#### 4. å†…å­˜ä¸è¶³
```bash
# é”™è¯¯: MemoryError
# è§£å†³: è°ƒæ•´å¤„ç†å‚æ•°
{
  "data_processing": {
    "use_multiprocessing": false,  // ç¦ç”¨å¤šè¿›ç¨‹
    "max_workers": 2,              // å‡å°‘è¿›ç¨‹æ•°
    "chunk_size": 1000            // å‡å°å—å¤§å°
  }
}
```

### æ—¥å¿—å’Œè°ƒè¯•

#### å¯ç”¨è¯¦ç»†æ—¥å¿—
```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

#### æ€§èƒ½ç›‘æ§
```bash
# ç›‘æ§å†…å­˜ä½¿ç”¨
python -m memory_profiler main.py stage1

# ç›‘æ§CPUä½¿ç”¨
python -m cProfile -o profile.prof main.py stage1
```

## ğŸ›£ï¸ å‘å±•è·¯çº¿å›¾

### ğŸ”® å³å°†æ¨å‡ºï¼ˆv2.xï¼‰
- [ ] **å¾®è°ƒæµç¨‹é›†æˆ**
  - è‡ªåŠ¨åŒ–æ¨¡å‹å¾®è°ƒç®¡é“
  - ä¸ªæ€§åŒ–æ¨¡å‹è®­ç»ƒæµç¨‹
  - è®­ç»ƒæ•ˆæœç›‘æ§å’Œè¯„ä¼°

- [ ] **å¯è§†åŒ–ç•Œé¢**
  - Webç«¯æ•°æ®åˆ†æç•Œé¢
  - èŠå¤©è®°å½•å¯è§†åŒ–å±•ç¤º
  - ä¸ªäººè¯­è¨€æ¨¡å¼åˆ†æå›¾è¡¨

- [ ] **å‰åç«¯è”é€š**
  - RESTful APIæ¥å£
  - å®æ—¶æ•°æ®å¤„ç†æœåŠ¡
  - å¤šç”¨æˆ·æ”¯æŒå’Œæƒé™ç®¡ç†

### ğŸŒŸ æ ¸å¿ƒè§„åˆ’ï¼ˆv3.xï¼‰
- [ ] **ä¸ªäººçŸ¥è¯†åº“æ„å»º**
  - æ™ºèƒ½çŸ¥è¯†æŠ½å–å’Œç»„ç»‡
  - è¯­ä¹‰åŒ–çŸ¥è¯†å›¾è°±æ„å»º
  - ä¸ªäººè®°å¿†å’Œç»éªŒå½’æ¡£

- [ ] **RAGå¢å¼ºæ£€ç´¢**
  - å‘é‡æ•°æ®åº“é›†æˆ
  - æ™ºèƒ½æ£€ç´¢å’ŒåŒ¹é…
  - ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„çŸ¥è¯†æ£€ç´¢

- [ ] **Rerankæ™ºèƒ½æ’åº**
  - å¤šæ¨¡æ€ç›¸å…³æ€§æ’åº
  - ä¸ªæ€§åŒ–æ’åºæ¨¡å‹
  - åŠ¨æ€æƒé‡è°ƒæ•´

- [ ] **Embeddingä¼˜åŒ–**
  - ä¸ªæ€§åŒ–å‘é‡è¡¨ç¤º
  - å¤šç»´åº¦è¯­ä¹‰ç¼–ç 
  - å®æ—¶å‘é‡æ›´æ–°

### ğŸ¯ ç»ˆææ„¿æ™¯ï¼ˆv4.x+ï¼‰
- [ ] **æ•°å­—äººç”Ÿæˆ**
  - å®Œæ•´çš„æ•°å­—äººæ ¼æ¨¡å‹
  - å¤šæ¨¡æ€äº¤äº’èƒ½åŠ›
  - æƒ…æ„Ÿå’Œä¸ªæ€§è¡¨è¾¾

- [ ] **æ™ºèƒ½å¯¹è¯å¼•æ“**
  - ä¸Šä¸‹æ–‡æ„ŸçŸ¥å¯¹è¯
  - é•¿æœŸè®°å¿†ç®¡ç†
  - ä¸ªæ€§åŒ–å›å¤ç”Ÿæˆ

- [ ] **ç”Ÿæ€ç³»ç»Ÿé›†æˆ**
  - å¤šå¹³å°æ•°æ®æºæ”¯æŒ
  - ç¬¬ä¸‰æ–¹åº”ç”¨é›†æˆ
  - å¼€æ”¾APIç”Ÿæ€

## ğŸ¤ å‚ä¸è´¡çŒ®

### ğŸ”§ å¼€å‘è´¡çŒ®
æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ï¼š
- **ä»£ç å¼€å‘**: æ–°åŠŸèƒ½å¼€å‘ã€Bugä¿®å¤ã€æ€§èƒ½ä¼˜åŒ–
- **æ–‡æ¡£å®Œå–„**: ä½¿ç”¨è¯´æ˜ã€APIæ–‡æ¡£ã€æ•™ç¨‹ç¼–å†™
- **æµ‹è¯•éªŒè¯**: åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€å…¼å®¹æ€§æµ‹è¯•
- **åˆ›æ„å»ºè®®**: æ–°åŠŸèƒ½å»ºè®®ã€ç”¨æˆ·ä½“éªŒæ”¹è¿›

### ğŸ“Š æ•°æ®è´¡çŒ®
- **æµ‹è¯•æ•°æ®**: æä¾›åŒ¿ååŒ–çš„æµ‹è¯•æ•°æ®é›†
- **ä½¿ç”¨åé¦ˆ**: åˆ†äº«ä½¿ç”¨ç»éªŒå’Œæ”¹è¿›å»ºè®®
- **æ•ˆæœè¯„ä¼°**: å¸®åŠ©è¯„ä¼°æ•°æ®è´¨é‡å’Œå¤„ç†æ•ˆæœ

### ğŸŒŸ ç¤¾åŒºå»ºè®¾
- **ç»éªŒåˆ†äº«**: åˆ†äº«æ•°å­—äººç”Ÿæˆçš„å¿ƒå¾—ä½“ä¼š
- **æŠ€æœ¯äº¤æµ**: å‚ä¸æŠ€æœ¯è®¨è®ºå’Œé—®é¢˜è§£ç­”
- **ç”Ÿæ€å»ºè®¾**: æ¨å¹¿é¡¹ç›®ï¼Œæ‰©å¤§å½±å“åŠ›

## ğŸ“„ è®¸å¯è¯ä¸å£°æ˜

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

### âš ï¸ é‡è¦å£°æ˜
- **éšç§ä¿æŠ¤**: è¯·ç¡®ä¿å¤„ç†çš„èŠå¤©æ•°æ®å·²è·å¾—ç›¸å…³äººå‘˜åŒæ„
- **æ•°æ®å®‰å…¨**: å»ºè®®åœ¨æœ¬åœ°ç¯å¢ƒå¤„ç†æ•æ„Ÿä¸ªäººæ•°æ®
- **åˆè§„ä½¿ç”¨**: è¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œéšç§æ”¿ç­–
- **ç ”ç©¶ç›®çš„**: æœ¬å·¥å…·ä¸»è¦ç”¨äºå­¦æœ¯ç ”ç©¶å’Œä¸ªäººå­¦ä¹ 

## ğŸ†˜ è·å–æ”¯æŒ

- ğŸ“§ **é‚®ä»¶æ”¯æŒ**: support@soulbyte.dev
- ğŸ’¬ **ç¤¾åŒºè®¨è®º**: [GitHub Discussions](https://github.com/your-repo/discussions)
- ğŸ› **é—®é¢˜æŠ¥å‘Š**: [GitHub Issues](https://github.com/your-repo/issues)
- ğŸ“– **è¯¦ç»†æ–‡æ¡£**: [Wikié¡µé¢](https://github.com/your-repo/wiki)
- ğŸ¯ **å‘å±•è§„åˆ’**: [é¡¹ç›®è·¯çº¿å›¾](ROADMAP.md)

## ğŸ¯ æ•°å­—äººç”Ÿæˆæ„¿æ™¯

### ğŸ§  ä¸ªäººæ•°å­—åŒ–
é€šè¿‡SoulByteå¤„ç†çš„èŠå¤©æ•°æ®å°†æˆä¸ºæ•°å­—äººçš„"è®°å¿†åŸºçŸ³"ï¼š
- **è¯­è¨€ä¹ æƒ¯**: æå–ä¸ªäººç‹¬ç‰¹çš„è¡¨è¾¾æ–¹å¼å’Œè¯­è¨€é£æ ¼
- **æ€ç»´æ¨¡å¼**: åˆ†æä¸ªäººçš„é€»è¾‘æ€ç»´å’Œå†³ç­–æ¨¡å¼
- **æƒ…æ„Ÿç‰¹å¾**: è¯†åˆ«ä¸ªäººçš„æƒ…æ„Ÿè¡¨è¾¾å’Œååº”æ¨¡å¼
- **çŸ¥è¯†ç»“æ„**: æ„å»ºä¸ªäººçš„çŸ¥è¯†ä½“ç³»å’Œä¸“ä¸šé¢†åŸŸ

### ğŸ”® æœªæ¥åº”ç”¨åœºæ™¯
- **æ™ºèƒ½åŠ©æ‰‹**: ä¸ªæ€§åŒ–çš„AIåŠ©æ‰‹ï¼Œå®Œå…¨æ¨¡æ‹Ÿä¸ªäººé£æ ¼
- **è™šæ‹Ÿé™ªä¼´**: åŸºäºçœŸå®è®°å¿†çš„è™šæ‹Ÿä¼´ä¾£æˆ–æœ‹å‹
- **çŸ¥è¯†ä¼ æ‰¿**: æ°¸ä¹…ä¿å­˜ä¸ªäººçš„æ™ºæ…§å’Œç»éªŒ
- **æ•™è‚²åŸ¹è®­**: ä¸ªæ€§åŒ–çš„å­¦ä¹ å’ŒæŒ‡å¯¼ç³»ç»Ÿ

### ğŸŒ æŠ€æœ¯ç”Ÿæ€
SoulByteå°†ä¸ä»¥ä¸‹æŠ€æœ¯æ·±åº¦é›†æˆï¼š
- **å¤§è¯­è¨€æ¨¡å‹**: GPTã€Claudeã€LLaMAç­‰ä¸»æµæ¨¡å‹
- **å‘é‡æ•°æ®åº“**: Pineconeã€Weaviateã€Chromaç­‰
- **æœºå™¨å­¦ä¹ æ¡†æ¶**: PyTorchã€TensorFlowã€HuggingFace
- **å¯è§†åŒ–å·¥å…·**: Streamlitã€Gradioã€Plotlyç­‰

---

**ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼**[![Star](https://img.shields.io/github/stars/kuangren777/SoulByte.svg?style=social&label=Star)](https://github.com/kuangren777/SoulByte/)

**ğŸ“¢ æ¬¢è¿åˆ†äº«æ‚¨çš„ä½¿ç”¨ç»éªŒå’Œæ”¹è¿›å»ºè®®ï¼**

**ğŸš€ æœŸå¾…ä¸æ‚¨ä¸€èµ·æ„å»ºæ•°å­—äººç”Ÿæˆçš„æœªæ¥ï¼**